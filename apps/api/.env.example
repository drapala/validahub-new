# ValidaHub API Configuration Example
# Copy this file to .env and update the values

# =============================================================================
# Application Settings
# =============================================================================
APP_NAME="ValidaHub API"
APP_VERSION="0.1.0"
ENVIRONMENT="development"  # development, staging, production, testing
DEBUG=true
LOG_LEVEL="INFO"  # DEBUG, INFO, WARNING, ERROR, CRITICAL

# =============================================================================
# API Settings
# =============================================================================
API_PREFIX="/api"
DOCS_URL="/docs"  # Set to empty in production
REDOC_URL="/redoc"  # Set to empty in production
OPENAPI_URL="/openapi.json"  # Set to empty in production

# =============================================================================
# Database Settings
# =============================================================================
DATABASE_URL="postgresql://validahub:validahub_dev_2024@localhost:5432/validahub_db"
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600
DB_ECHO=false

# =============================================================================
# Redis Settings
# =============================================================================
REDIS_URL="redis://:redis_dev_2024@localhost:6379/0"
REDIS_MAX_CONNECTIONS=50
REDIS_SOCKET_TIMEOUT=5
REDIS_SOCKET_CONNECT_TIMEOUT=5
REDIS_SOCKET_KEEPALIVE=true

# =============================================================================
# Celery Settings
# =============================================================================
CELERY_BROKER_URL="redis://:redis_dev_2024@localhost:6379/1"
CELERY_RESULT_BACKEND="redis://:redis_dev_2024@localhost:6379/2"
CELERY_TASK_SERIALIZER="json"
CELERY_RESULT_SERIALIZER="json"
CELERY_ACCEPT_CONTENT=["json"]
CELERY_TIMEZONE="UTC"
CELERY_ENABLE_UTC=true
CELERY_TASK_TRACK_STARTED=true
CELERY_TASK_TIME_LIMIT=300
CELERY_TASK_SOFT_TIME_LIMIT=270
CELERY_WORKER_PREFETCH_MULTIPLIER=1
CELERY_WORKER_MAX_TASKS_PER_CHILD=1000

# =============================================================================
# Validation Settings
# =============================================================================
VALIDATION_ALLOWED_RULESETS="default,strict,lenient,minimal,comprehensive"
VALIDATION_MAX_CSV_FILE_SIZE=1073741824  # 1GB in bytes
VALIDATION_STREAMING_THRESHOLD=104857600  # 100MB in bytes
VALIDATION_MAX_ROWS_PER_BATCH=1000
VALIDATION_MAX_VALIDATION_ERRORS=100

# =============================================================================
# Queue Settings
# =============================================================================
QUEUE_VALID_TASKS="validate_csv_job,correct_csv_job,analyze_data_job,export_results_job,sync_connector_job,generate_report_job"
QUEUE_TASK_MAPPINGS="validate_csv_job:src.workers.tasks.validate_csv_job,correct_csv_job:src.workers.tasks.correct_csv_job"
VALIDATE_CSV_JOB_TIME_LIMIT=300
VALIDATE_CSV_JOB_SOFT_TIME_LIMIT=270
CORRECT_CSV_JOB_TIME_LIMIT=600
CORRECT_CSV_JOB_SOFT_TIME_LIMIT=570
DEFAULT_JOB_TIME_LIMIT=300
DEFAULT_JOB_SOFT_TIME_LIMIT=270

# =============================================================================
# Security Settings
# =============================================================================
SECRET_KEY="dev-secret-key-change-in-production"
JWT_ALGORITHM="HS256"
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7
SECURITY_CORS_ORIGINS="http://localhost:3000,http://localhost:3001"
SECURITY_CORS_ALLOW_CREDENTIALS=true
SECURITY_CORS_ALLOW_METHODS="*"
SECURITY_CORS_ALLOW_HEADERS="*"

# =============================================================================
# Storage Settings
# =============================================================================
STORAGE_LOCAL_PATH="/tmp/validahub"
S3_BUCKET=""
S3_REGION="us-east-1"
AWS_ACCESS_KEY_ID=""
AWS_SECRET_ACCESS_KEY=""
S3_ENDPOINT_URL=""
STORAGE_MAX_UPLOAD_SIZE=5368709120  # 5GB in bytes
STORAGE_ALLOWED_EXTENSIONS=".csv,.xlsx,.xls,.json,.xml"

# =============================================================================
# Telemetry Settings
# =============================================================================
TELEMETRY_ENABLED=true
TELEMETRY_SERVICE_NAME="validahub-api"
OTEL_EXPORTER_ENDPOINT=""
OTEL_EXPORTER_HEADERS=""
METRICS_ENABLED=true
TRACES_ENABLED=true
LOGS_ENABLED=true
TELEMETRY_SAMPLING_RATE=1.0

# =============================================================================
# Rate Limiting
# =============================================================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_PERIOD=60